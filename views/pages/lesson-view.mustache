{{>partials/header}}

<!-- CSS específico para visualização de aulas -->
<link rel="stylesheet" href="/css/lesson-viewer.css">
<link rel="stylesheet" href="/css/lesson-progress.css">
<link rel="stylesheet" href="/css/lesson-navigation.css">

<main class="lesson-viewer">
  <div class="container">
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
      <a href="/dashboard" class="breadcrumb-item">Dashboard</a>
      <span class="breadcrumb-separator">/</span>
      <a href="/careers" class="breadcrumb-item">Carreiras</a>
      <span class="breadcrumb-separator">/</span>
      <a href="/content/package/{{lesson.package_id}}/lessons" class="breadcrumb-item">{{lesson.package_name}}</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">{{lesson.name}}</span>
    </nav>

    <!-- Cabeçalho da Aula -->
    <div class="lesson-header">
      <div class="lesson-info">
        <div class="lesson-badge">
          <span class="package-icon">{{lesson.package_icon}}</span>
          <span class="lesson-number">Aula {{lesson.lesson_number}}</span>
        </div>
        <h1 class="lesson-title">{{lesson.name}}</h1>
        <p class="lesson-description">{{lesson.description}}</p>
      </div>
      
      <!-- Progresso da Aula -->
      <div class="lesson-progress">
        <div class="progress-info">
          <span class="progress-label">Progresso do Pacote</span>
          <span class="progress-percentage">{{progressStats.progressPercentage}}%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" style="width: {{progressStats.progressPercentage}}%"></div>
        </div>
      </div>
    </div>

    <!-- Player de Conteúdo -->
    <div class="lesson-content">
      <div class="content-player">
        <div class="video-placeholder">
          <div class="play-button" id="playButton">
            <i class="icon-play" aria-hidden="true"></i>
          </div>
          <div class="video-overlay">
            <h3>{{lesson.name}}</h3>
            <p>Clique para iniciar a aula</p>
          </div>
        </div>
        
        <!-- Controles do Player -->
        <div class="player-controls">
          <button class="control-btn" id="playPauseBtn" aria-label="Play/Pause">
            <i class="icon-play" aria-hidden="true"></i>
          </button>
          
          <div class="progress-container">
            <div class="time-display">
              <span id="currentTime">0:00</span>
            </div>
            <div class="progress-slider">
              <div class="progress-track">
                <div class="progress-thumb" style="left: 0%"></div>
              </div>
            </div>
            <div class="time-display">
              <span id="duration">15:00</span>
            </div>
          </div>
          
          <div class="volume-controls">
            <button class="control-btn" id="volumeBtn" aria-label="Volume">
              <i class="icon-volume-2" aria-hidden="true"></i>
            </button>
            <div class="volume-slider">
              <div class="volume-track">
                <div class="volume-thumb" style="left: 70%"></div>
              </div>
            </div>
          </div>
          
          <button class="control-btn" id="fullscreenBtn" aria-label="Tela cheia">
            <i class="icon-maximize" aria-hidden="true"></i>
          </button>
        </div>
      </div>

      <!-- Conteúdo Textual da Aula -->
      <div class="lesson-text-content">
        <h2>Conteúdo da Aula</h2>
        <div class="content-sections">
          <div class="content-section">
            <h3>Objetivos de Aprendizado</h3>
            <ul>
              <li>Compreender os conceitos fundamentais abordados</li>
              <li>Aplicar os conhecimentos em exercícios práticos</li>
              <li>Desenvolver habilidades de resolução de problemas</li>
            </ul>
          </div>
          
          <div class="content-section">
            <h3>Recursos Complementares</h3>
            <div class="resource-links">
              <a href="#" class="resource-link">
                <i class="icon-file-text" aria-hidden="true"></i>
                Material de Apoio (PDF)
              </a>
              <a href="#" class="resource-link">
                <i class="icon-code" aria-hidden="true"></i>
                Código de Exemplo
              </a>
              <a href="#" class="resource-link">
                <i class="icon-external-link" aria-hidden="true"></i>
                Documentação Oficial
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Navegação entre Aulas -->
    <div class="lesson-navigation">
      <div class="nav-section">
        {{#previousLesson}}
        <a href="/content/lesson/{{id}}" class="nav-btn nav-prev">
          <i class="icon-arrow-left" aria-hidden="true"></i>
          <div class="nav-content">
            <span class="nav-label">Aula Anterior</span>
            <span class="nav-title">{{name}}</span>
          </div>
        </a>
        {{/previousLesson}}
        
        {{^previousLesson}}
        <div class="nav-placeholder">
          <span class="nav-disabled">Primeira aula do pacote</span>
        </div>
        {{/previousLesson}}
      </div>

      <div class="nav-center">
        <button class="btn btn-primary" id="markCompleteBtn" data-lesson-id="{{lesson.id}}">
          <i class="icon-check" aria-hidden="true"></i>
          Marcar como Concluída
        </button>
      </div>

      <div class="nav-section">
        {{#nextLesson}}
        <a href="/content/lesson/{{id}}" class="nav-btn nav-next">
          <div class="nav-content">
            <span class="nav-label">Próxima Aula</span>
            <span class="nav-title">{{name}}</span>
          </div>
          <i class="icon-arrow-right" aria-hidden="true"></i>
        </a>
        {{/nextLesson}}
        
        {{^nextLesson}}
        <div class="nav-placeholder">
          <span class="nav-disabled">Última aula do pacote</span>
        </div>
        {{/nextLesson}}
      </div>
    </div>

    <!-- Questionários da Aula -->
    {{#quizzes}}
    <div class="lesson-quizzes">
      <h2>Questionários da Aula</h2>
      <div class="quiz-list">
        {{#quizzes}}
        <div class="quiz-card">
          <div class="quiz-header">
            <h3>Questão {{question_number}}</h3>
            <span class="quiz-type">Código</span>
          </div>
          <p class="quiz-question">{{question_text}}</p>
          <a href="/quiz/{{id}}" class="btn btn-outline">
            <i class="icon-code" aria-hidden="true"></i>
            Responder Questão
          </a>
        </div>
        {{/quizzes}}
      </div>
    </div>
    {{/quizzes}}
  </div>
</main>

<!-- Flash Messages -->
{{#flash}}
<div class="flash-message flash-{{type}}" role="alert">
  <i class="flash-icon icon-{{type}}" aria-hidden="true"></i>
  <span class="flash-text">{{message}}</span>
  <button class="flash-close" aria-label="Fechar mensagem">
    <i class="icon-x" aria-hidden="true"></i>
  </button>
</div>
{{/flash}}



<!-- JavaScript para sistema de progresso avançado -->
<script src="/js/lesson-progress.js"></script>

<!-- JavaScript para sistema de navegação inteligente -->
<script src="/js/lesson-navigation.js"></script>

{{>partials/footer}} 